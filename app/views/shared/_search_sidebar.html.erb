<%= search_form_for @q, url: bars_path, method: :get, local: true, html: { id: 'unified-search-form' } do |f| %>
  <div class="mb-8">
    <%= f.text_field :name_or_address_or_phone_or_smoking_status_or_description_or_specialties_category_cont,
        placeholder: "„Ç≠„Éº„ÉØ„Éº„Éâ„Åß„Éê„Éº„ÇíÊ§úÁ¥¢...",
        class: "search-input",
        value: params.dig(:q, :name_or_address_or_phone_or_smoking_status_or_description_or_specialties_category_cont) %>
  </div>
  <div class="mb-6">
    <div class="sidebar-section-title">„Ç®„É™„Ç¢</div>
    <div class="mb-3">
      <%= f.text_field :address_cont,
          placeholder: "„Ç®„É™„Ç¢„ÇíÂÖ•Âäõ...",
          class: "search-input",
          value: params.dig(:q, :address_cont) %>
    </div>
    <div class="filter-options-container">
      <% %w[Êñ∞ÂÆø ÂÖ≠Êú¨Êú® ÊÅµÊØîÂØø Ê∏ãË∞∑].each do |area| %>
        <div class="filter-option <%= 'active' if params.dig(:q, :address_cont) == area %>"
             onclick="setFilterValue('address_cont', '<%= area %>')">
          <span class="filter-option-label"><%= area %></span>
          <%# <span class="filter-option-count"><%= @filter_counts&.dig(:area, area) || 0 %> <!-- </span> %> -->
        </div>
      <% end %>
      <% if params.dig(:q, :address_cont).present? %>
        <div class="filter-option" onclick="clearFilterValue('address_cont')">
          <span class="filter-option-label">„Åô„Åπ„Å¶Ë°®Á§∫</span>
        </div>
      <% end %>
    </div>
  </div>
  <div class="mb-6">
    <div class="sidebar-section-title">‰æ°Ê†ºÂ∏Ø</div>
    <div class="filter-options-container">
      <% [
        { value: 'reasonable', label: '„É™„Éº„Ç∫„Éä„Éñ„É´', description: 'Min „Äú¬•4,000 or Max „Äú¬•4,500' },
        { value: 'standard', label: 'Ê®ôÊ∫ñ', description: '' },
        { value: 'luxury', label: 'È´òÁ¥ö', description: 'Min ¬•8,000„Äú or Max „Äú¬•10,000' }
        ].each do |option| %>
        <div class="filter-option <%= 'active' if params.dig(:q, :price_category_eq) == option[:value] %>"
             onclick="setFilterValue('price_category_eq', '<%= option[:value] %>')">
          <div class="flex-1">
            <span class="filter-option-label"><%= option[:label] %></span>
            <div class="text-xs text-gray-500"><%= option[:description] %></div>
          </div>
          <%# <span class="filter-option-count"><%= @filter_counts&.dig(:price_category, option[:value]) || 0 %> <!-- </span> %> -->
        </div>
      <% end %>
      <% if params.dig(:q, :price_category_eq).present? %>
        <div class="filter-option" onclick="clearFilterValue('price_category_eq')">
          <span class="filter-option-label">„Åô„Åπ„Å¶Ë°®Á§∫</span>
        </div>
      <% end %>
    </div>
    <%= f.hidden_field :price_category_eq, value: params.dig(:q, :price_category_eq) %>
  </div>
  <div class="mb-6">
    <div class="sidebar-section-title">Âñ´ÁÖôÁä∂Ê≥Å</div>
    <div class="filter-options-container">
      <% [
        { value: 'Á¶ÅÁÖô', emoji: 'üö≠', label: 'Á¶ÅÁÖô' },
        { value: 'ÂàÜÁÖô', emoji: 'üö´', label: 'ÂàÜÁÖô' },
        { value: 'Âñ´ÁÖôÂèØ', emoji: 'üö¨', label: 'Âñ´ÁÖôÂèØ' }
      ].each do |option| %>
        <div class="filter-option <%= 'active' if params.dig(:q, :smoking_status_eq) == option[:value] %>"
             onclick="setFilterValue('smoking_status_eq', '<%= option[:value] %>')">
          <span class="text-lg"><%= option[:emoji] %></span>
          <span class="filter-option-label"><%= option[:label] %></span>
          <%# <span class="filter-option-count"><%= @filter_counts&.dig(:smoking_status, option[:value]) || 0 %> <!-- </span> %> -->
        </div>
      <% end %>
      <% if params.dig(:q, :smoking_status_eq).present? %>
        <div class="filter-option" onclick="clearFilterValue('smoking_status_eq')">
          <span class="filter-option-label">„Åô„Åπ„Å¶Ë°®Á§∫</span>
        </div>
      <% end %>
    </div>
    <%= f.hidden_field :smoking_status_eq, value: params.dig(:q, :smoking_status_eq) %>
  </div>
  <% if search_performed? %>
    <div class="mb-6">
      <div class="filter-option" onclick="clearAllFiltersUnified()" style="justify-content: center; background-color: var(--wine); color: white;">
        <span class="filter-option-label">„Åô„Åπ„Å¶„ÅÆÊù°‰ª∂„Çí„ÇØ„É™„Ç¢</span>
      </div>
    </div>
  <% end %>
<% end %>
